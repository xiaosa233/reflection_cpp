# Generated by quick cmake


cmake_minimum_required(VERSION 3.2)
set(CMAKE_SUPPRESS_REGENERATION true)
set(CMAKE_CONFIGURATION_TYPES "Debug;Release" CACHE STRING "" FORCE)
set(CMAKE_CXX_STANDARD 17)
if("${CMAKE_GENERATOR}" MATCHES "^Visual Studio.*")
  set(CMAKE_GENERATOR_PLATFORM "x64" CACHE INTERNAL "" FORCE)
endif()


project(reflection_cpp)
set (PROJECT_DIR ${CMAKE_CURRENT_SOURCE_DIR}/../)
set (SOURCE_DIR ${PROJECT_DIR}/sources)
set (CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${PROJECT_DIR}/lib)
set (CMAKE_LIBRARY_OUTPUT_DIRECTORY ${PROJECT_DIR}/lib)
set (CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_DIR}/bin)
include_directories(${SOURCE_DIR})


# module reflection
FILE(GLOB reflection ${SOURCE_DIR}/reflection/common.h ${SOURCE_DIR}/reflection/reflection_func.h ${SOURCE_DIR}/reflection/reflection.h ${SOURCE_DIR}/reflection/reflection_meta.h ${SOURCE_DIR}/reflection/utils.h ${SOURCE_DIR}/reflection/to_string_utils.h ${SOURCE_DIR}/reflection/status.h ${SOURCE_DIR}/reflection/utils.cpp)
FILE(GLOB reflection_meta ${SOURCE_DIR}/reflection/meta/meta_info_spec.h ${SOURCE_DIR}/reflection/meta/meta_manager.h ${SOURCE_DIR}/reflection/meta/meta_item_spec_serializer.h ${SOURCE_DIR}/reflection/meta/meta_base_classes.h ${SOURCE_DIR}/reflection/meta/meta_base_classes.cpp ${SOURCE_DIR}/reflection/meta/meta_manager.cpp)
FILE(GLOB reflection_func ${SOURCE_DIR}/reflection/func/string_callable.h ${SOURCE_DIR}/reflection/func/func_base_classes.h ${SOURCE_DIR}/reflection/func/func_signature.h ${SOURCE_DIR}/reflection/func/utils.h ${SOURCE_DIR}/reflection/func/func_item_args.h ${SOURCE_DIR}/reflection/func/func_info_spec.h ${SOURCE_DIR}/reflection/func/func_item_spec.h ${SOURCE_DIR}/reflection/func/func_signature.cpp)
FILE(GLOB reflection_serialization ${SOURCE_DIR}/reflection/serialization/serializer_base.h ${SOURCE_DIR}/reflection/serialization/serializer.h ${SOURCE_DIR}/reflection/serialization/format_context.h ${SOURCE_DIR}/reflection/serialization/endian.h ${SOURCE_DIR}/reflection/serialization/utils.h ${SOURCE_DIR}/reflection/serialization/trait_utils.h ${SOURCE_DIR}/reflection/serialization/binary_coder.h ${SOURCE_DIR}/reflection/serialization/byte_swapper.h ${SOURCE_DIR}/reflection/serialization/text_coder.h ${SOURCE_DIR}/reflection/serialization/utils.cpp ${SOURCE_DIR}/reflection/serialization/endian.cpp ${SOURCE_DIR}/reflection/serialization/serializer.cpp)
FILE(GLOB reflection_BUILD_TARGET_FILE_GROUP ${SOURCE_DIR}/reflection/build.py)
source_group("sources" FILES ${reflection})
source_group("sources\\meta" FILES ${reflection_meta})
source_group("sources\\func" FILES ${reflection_func})
source_group("sources\\serialization" FILES ${reflection_serialization})
add_library(reflection STATIC ${reflection}  ${reflection_meta}  ${reflection_func}  ${reflection_serialization}  ${reflection_BUILD_TARGET_FILE_GROUP} )
target_include_directories(reflection 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(reflection  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general pthread
)
add_custom_command(TARGET reflection PRE_BUILD COMMAND /usr/bin/python3 /home/xiaojian.li/personal/quick_cmake/sources/quick_cmake/main.py --workspace /home/xiaojian.li/personal/reflection_cpp --std=c++17 --module=reflection --pre_build)
add_custom_command(TARGET reflection POST_BUILD COMMAND /usr/bin/python3 /home/xiaojian.li/personal/quick_cmake/sources/quick_cmake/main.py --workspace /home/xiaojian.li/personal/reflection_cpp --std=c++17 --module=reflection --post_build)
set_target_properties(reflection PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_reflection
FILE(GLOB test_reflection_reflection ${SOURCE_DIR}/reflection/reflection_test.cpp)
source_group("ut_file" FILES ${test_reflection_reflection})
add_executable(test_reflection_reflection ${test_reflection_reflection} )
target_include_directories(test_reflection_reflection 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_reflection  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_reflection PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_status
FILE(GLOB test_reflection_status ${SOURCE_DIR}/reflection/status_test.cpp)
source_group("ut_file" FILES ${test_reflection_status})
add_executable(test_reflection_status ${test_reflection_status} )
target_include_directories(test_reflection_status 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_status  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_status PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_utils
FILE(GLOB test_reflection_utils ${SOURCE_DIR}/reflection/utils_test.cpp)
source_group("ut_file" FILES ${test_reflection_utils})
add_executable(test_reflection_utils ${test_reflection_utils} )
target_include_directories(test_reflection_utils 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_utils  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_utils PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_meta_meta_base_classes
FILE(GLOB test_reflection_meta_meta_base_classes ${SOURCE_DIR}/reflection/meta/meta_base_classes_test.cpp)
source_group("ut_file" FILES ${test_reflection_meta_meta_base_classes})
add_executable(test_reflection_meta_meta_base_classes ${test_reflection_meta_meta_base_classes} )
target_include_directories(test_reflection_meta_meta_base_classes 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_meta_meta_base_classes  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_meta_meta_base_classes PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_func_string_callable
FILE(GLOB test_reflection_func_string_callable ${SOURCE_DIR}/reflection/func/string_callable_test.cpp)
source_group("ut_file" FILES ${test_reflection_func_string_callable})
add_executable(test_reflection_func_string_callable ${test_reflection_func_string_callable} )
target_include_directories(test_reflection_func_string_callable 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_func_string_callable  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_func_string_callable PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_func_func_base_classes
FILE(GLOB test_reflection_func_func_base_classes ${SOURCE_DIR}/reflection/func/func_base_classes_test.cpp)
source_group("ut_file" FILES ${test_reflection_func_func_base_classes})
add_executable(test_reflection_func_func_base_classes ${test_reflection_func_func_base_classes} )
target_include_directories(test_reflection_func_func_base_classes 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_func_func_base_classes  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_func_func_base_classes PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_func_func_signature
FILE(GLOB test_reflection_func_func_signature ${SOURCE_DIR}/reflection/func/func_signature_test.cpp)
source_group("ut_file" FILES ${test_reflection_func_func_signature})
add_executable(test_reflection_func_func_signature ${test_reflection_func_func_signature} )
target_include_directories(test_reflection_func_func_signature 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_func_func_signature  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_func_func_signature PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_serialization_binary_coder
FILE(GLOB test_reflection_serialization_binary_coder ${SOURCE_DIR}/reflection/serialization/binary_coder_test.cpp)
source_group("ut_file" FILES ${test_reflection_serialization_binary_coder})
add_executable(test_reflection_serialization_binary_coder ${test_reflection_serialization_binary_coder} )
target_include_directories(test_reflection_serialization_binary_coder 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_serialization_binary_coder  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_serialization_binary_coder PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_serialization_text_code
FILE(GLOB test_reflection_serialization_text_code ${SOURCE_DIR}/reflection/serialization/text_code_test.cpp)
source_group("ut_file" FILES ${test_reflection_serialization_text_code})
add_executable(test_reflection_serialization_text_code ${test_reflection_serialization_text_code} )
target_include_directories(test_reflection_serialization_text_code 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_serialization_text_code  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_serialization_text_code PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_serialization_byte_swapper
FILE(GLOB test_reflection_serialization_byte_swapper ${SOURCE_DIR}/reflection/serialization/byte_swapper_test.cpp)
source_group("ut_file" FILES ${test_reflection_serialization_byte_swapper})
add_executable(test_reflection_serialization_byte_swapper ${test_reflection_serialization_byte_swapper} )
target_include_directories(test_reflection_serialization_byte_swapper 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_serialization_byte_swapper  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_serialization_byte_swapper PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_serialization_utils
FILE(GLOB test_reflection_serialization_utils ${SOURCE_DIR}/reflection/serialization/utils_test.cpp)
source_group("ut_file" FILES ${test_reflection_serialization_utils})
add_executable(test_reflection_serialization_utils ${test_reflection_serialization_utils} )
target_include_directories(test_reflection_serialization_utils 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_serialization_utils  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_serialization_utils PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_serialization_serialize
FILE(GLOB test_reflection_serialization_serialize ${SOURCE_DIR}/reflection/serialization/serialize_test.cpp)
source_group("ut_file" FILES ${test_reflection_serialization_serialize})
add_executable(test_reflection_serialization_serialize ${test_reflection_serialization_serialize} )
target_include_directories(test_reflection_serialization_serialize 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_serialization_serialize  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_serialization_serialize PROPERTIES LINKER_LANGUAGE CXX)


# module test_reflection_serialization_endian
FILE(GLOB test_reflection_serialization_endian ${SOURCE_DIR}/reflection/serialization/endian_test.cpp)
source_group("ut_file" FILES ${test_reflection_serialization_endian})
add_executable(test_reflection_serialization_endian ${test_reflection_serialization_endian} )
target_include_directories(test_reflection_serialization_endian 
 PUBLIC ${SOURCE_DIR}/reflection PUBLIC ${PROJECT_DIR}/third_parties/googletest/include)
target_link_libraries(test_reflection_serialization_endian  optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest_main.a
 optimized ${PROJECT_DIR}/third_parties/googletest/lib/linux/Release/libgtest.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest_main.a
 debug ${PROJECT_DIR}/third_parties/googletest/lib/linux/Debug/libgtest.a
 general reflection
 general pthread
)
set_target_properties(test_reflection_serialization_endian PROPERTIES LINKER_LANGUAGE CXX)


# run all unittest under folder reflection
add_custom_target(test_reflection DEPENDS test_reflection_func_func_base_classes test_reflection_func_func_signature test_reflection_func_string_callable test_reflection_meta_meta_base_classes test_reflection_reflection test_reflection_serialization_binary_coder test_reflection_serialization_byte_swapper test_reflection_serialization_endian test_reflection_serialization_serialize test_reflection_serialization_text_code test_reflection_serialization_utils test_reflection_status test_reflection_utils COMMAND echo run unittest files test_reflection/reflection/func/func_base_classes_test.cpp COMMAND $<TARGET_FILE:test_reflection_func_func_base_classes>
 COMMAND echo run unittest files test_reflection/reflection/func/func_signature_test.cpp COMMAND $<TARGET_FILE:test_reflection_func_func_signature>
 COMMAND echo run unittest files test_reflection/reflection/func/string_callable_test.cpp COMMAND $<TARGET_FILE:test_reflection_func_string_callable>
 COMMAND echo run unittest files test_reflection/reflection/meta/meta_base_classes_test.cpp COMMAND $<TARGET_FILE:test_reflection_meta_meta_base_classes>
 COMMAND echo run unittest files test_reflection/reflection/reflection_test.cpp COMMAND $<TARGET_FILE:test_reflection_reflection>
 COMMAND echo run unittest files test_reflection/reflection/serialization/binary_coder_test.cpp COMMAND $<TARGET_FILE:test_reflection_serialization_binary_coder>
 COMMAND echo run unittest files test_reflection/reflection/serialization/byte_swapper_test.cpp COMMAND $<TARGET_FILE:test_reflection_serialization_byte_swapper>
 COMMAND echo run unittest files test_reflection/reflection/serialization/endian_test.cpp COMMAND $<TARGET_FILE:test_reflection_serialization_endian>
 COMMAND echo run unittest files test_reflection/reflection/serialization/serialize_test.cpp COMMAND $<TARGET_FILE:test_reflection_serialization_serialize>
 COMMAND echo run unittest files test_reflection/reflection/serialization/text_code_test.cpp COMMAND $<TARGET_FILE:test_reflection_serialization_text_code>
 COMMAND echo run unittest files test_reflection/reflection/serialization/utils_test.cpp COMMAND $<TARGET_FILE:test_reflection_serialization_utils>
 COMMAND echo run unittest files test_reflection/reflection/status_test.cpp COMMAND $<TARGET_FILE:test_reflection_status>
 COMMAND echo run unittest files test_reflection/reflection/utils_test.cpp COMMAND $<TARGET_FILE:test_reflection_utils>
)

